<!doctype html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>자동매매 기록 전체보기</title>
    <link rel="icon" href="/favicon.ico" sizes="any" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <style>
      :root {
        color-scheme: dark;
        --bg-top: #162a4a;
        --bg-mid: #0d1a34;
        --bg-bot: #0a1323;
        --panel-bg: rgba(11, 22, 43, 0.78);
        --panel-line: rgba(191, 216, 255, 0.2);
        --text: #eaf3ff;
        --muted: rgba(234, 243, 255, 0.78);
      }
      *,
      *::before,
      *::after {
        box-sizing: border-box;
      }
      body {
        margin: 0;
        min-height: 100vh;
        background:
          radial-gradient(1100px 560px at 20% -18%, var(--bg-top) 0%, transparent 50%),
          linear-gradient(180deg, var(--bg-mid) 0%, var(--bg-bot) 100%);
        color: var(--text);
        font-family: "Pretendard", "Noto Sans KR", sans-serif;
      }
      .mobile-shell {
        width: min(920px, 100%);
        margin: 0 auto;
        padding: 12px 12px 20px;
      }
      .head {
        display: flex;
        align-items: center;
        justify-content: space-between;
        flex-wrap: wrap;
        gap: 8px;
        margin-bottom: 10px;
      }
      .head-main {
        display: inline-flex;
        align-items: center;
        gap: 8px;
        min-width: 0;
      }
      .title {
        font-size: 20px;
        font-weight: 800;
        letter-spacing: -0.2px;
      }
      .center-google-auth-btn {
        display: inline-flex;
        align-items: center;
        gap: 6px;
        width: auto;
        min-width: 102px;
        height: 32px;
        padding: 0 12px;
        border-radius: 999px;
        font-size: 12px;
        font-weight: 780;
        border-color: rgba(130, 188, 255, 0.5);
        background: rgba(23, 45, 78, 0.78);
        color: rgba(232, 243, 255, 0.95);
      }
      .center-google-auth-btn.linked {
        border-color: rgba(86, 238, 181, 0.48);
        background: rgba(86, 238, 181, 0.18);
        color: rgba(222, 255, 242, 0.98);
      }
      .center-google-auth-btn .google-mark {
        width: 17px;
        height: 17px;
        border-radius: 999px;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        font-size: 10px;
        font-weight: 900;
        color: #0b1020;
        background: conic-gradient(
          #4285f4 0deg 80deg,
          #34a853 80deg 170deg,
          #fbbc05 170deg 255deg,
          #ea4335 255deg 360deg
        );
      }
      .center-google-auth-btn .google-mark::after {
        content: "G";
        display: inline-block;
        width: 13px;
        height: 13px;
        border-radius: 999px;
        line-height: 13px;
        text-align: center;
        background: #ffffff;
      }
      .head-tools {
        display: inline-flex;
        align-items: center;
        gap: 8px;
        margin-left: auto;
      }
      .center-close-btn {
        width: auto;
        min-width: 76px;
        height: 34px;
        padding: 0 12px;
        border-radius: 9px;
        font-size: 12px;
      }
      .logic-open-btn {
        width: auto;
        min-width: 88px;
        height: 34px;
        padding: 0 12px;
        border-radius: 9px;
        font-size: 12px;
      }
      .logic-modal {
        position: fixed;
        inset: 0;
        z-index: 220;
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 14px;
        background: rgba(2, 7, 18, 0.64);
        backdrop-filter: blur(2px);
      }
      .center-google-modal {
        position: fixed;
        inset: 0;
        z-index: 230;
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 14px;
        background: rgba(2, 7, 18, 0.68);
        backdrop-filter: blur(2px);
      }
      .center-google-modal[hidden] {
        display: none !important;
      }
      .center-google-modal-dialog {
        width: min(500px, 100%);
        border-radius: 16px;
        border: 1px solid rgba(185, 211, 255, 0.34);
        background: linear-gradient(180deg, rgba(8, 18, 38, 0.98), rgba(3, 10, 24, 0.98));
        box-shadow: 0 24px 58px rgba(0, 0, 0, 0.48);
        padding: 14px;
      }
      .center-google-modal-head {
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 10px;
        margin-bottom: 8px;
      }
      .center-google-modal-title {
        font-size: 24px;
        font-weight: 840;
        letter-spacing: -0.2px;
      }
      .center-google-modal-close {
        width: auto;
        min-width: 72px;
        height: 30px;
        padding: 0 10px;
        font-size: 12px;
        align-self: flex-start;
      }
      .center-google-modal-desc {
        font-size: 14px;
        line-height: 1.4;
        color: rgba(234, 243, 255, 0.9);
      }
      .center-google-modal-body {
        margin-top: 10px;
        border-radius: 12px;
        border: 1px solid rgba(172, 206, 255, 0.28);
        background: rgba(9, 19, 39, 0.84);
        padding: 10px;
      }
      .center-google-modal-state {
        border: 1px solid rgba(84, 228, 177, 0.3);
        border-radius: 11px;
        background: rgba(18, 44, 61, 0.4);
        padding: 10px 11px;
      }
      .center-google-modal-state[hidden] {
        display: none !important;
      }
      .center-google-modal-state-label {
        font-size: 12px;
        color: rgba(227, 255, 244, 0.9);
        margin-bottom: 4px;
      }
      .center-google-modal-state-email {
        font-size: 15px;
        font-weight: 760;
        color: rgba(234, 243, 255, 0.98);
        word-break: break-all;
      }
      .center-google-modal-btn-wrap {
        margin-top: 8px;
        display: flex;
        justify-content: center;
      }
      .center-google-modal-btn-wrap[hidden] {
        display: none !important;
      }
      .center-google-modal-btn {
        display: flex;
        justify-content: center;
      }
      .center-google-modal-btn > div {
        width: auto !important;
        max-width: 100%;
        line-height: 0;
        background: transparent !important;
        border-radius: 999px;
        overflow: hidden;
      }
      .center-google-modal-actions {
        margin-top: 10px;
        display: grid;
        grid-template-columns: repeat(2, minmax(0, 1fr));
        gap: 8px;
      }
      .center-google-modal-actions[hidden] {
        display: none !important;
      }
      .center-google-modal-actions button {
        height: 36px;
        border-radius: 10px;
        font-size: 12px;
      }
      .center-google-modal-switch {
        background: rgba(78, 230, 255, 0.12);
        border-color: rgba(78, 230, 255, 0.35);
        color: rgba(214, 248, 255, 0.95);
      }
      .center-google-modal-disconnect {
        background: rgba(255, 154, 176, 0.14);
        border-color: rgba(255, 154, 176, 0.4);
        color: rgba(255, 219, 229, 0.96);
      }
      .center-google-modal-actions.is-busy {
        opacity: 0.62;
        pointer-events: none;
      }
      .center-google-modal-note {
        margin-top: 8px;
        font-size: 12px;
        color: rgba(234, 243, 255, 0.82);
      }
      .center-google-modal-note:empty {
        display: none;
      }
      .center-google-modal-note.warn {
        color: rgba(255, 189, 206, 0.95);
      }
      .center-google-modal-note.ok {
        color: rgba(122, 245, 198, 0.95);
      }
      .logic-modal[hidden] {
        display: none !important;
      }
      .logic-modal-dialog {
        width: min(740px, 100%);
        max-height: calc(100vh - 28px);
        overflow: hidden;
        border-radius: 14px;
        border: 1px solid rgba(185, 211, 255, 0.26);
        background: linear-gradient(180deg, rgba(8, 18, 38, 0.98), rgba(4, 12, 27, 0.98));
        box-shadow: 0 24px 58px rgba(0, 0, 0, 0.42);
      }
      .logic-modal-head {
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 10px;
        padding: 12px 14px;
        border-bottom: 1px solid rgba(255, 255, 255, 0.12);
      }
      .logic-modal-title {
        font-size: 15px;
        font-weight: 820;
      }
      .logic-modal-close {
        width: auto;
        min-width: 74px;
        height: 32px;
        padding: 0 10px;
        font-size: 12px;
      }
      .logic-modal-body {
        overflow: auto;
        max-height: calc(100vh - 120px);
        padding: 12px 14px 14px;
      }
      .logic-block {
        border: 1px solid rgba(180, 206, 255, 0.18);
        border-radius: 10px;
        padding: 10px 11px;
        background: rgba(10, 20, 39, 0.56);
      }
      .logic-block + .logic-block {
        margin-top: 8px;
      }
      .logic-k {
        font-size: 12px;
        font-weight: 780;
        color: rgba(234, 243, 255, 0.98);
        margin-bottom: 5px;
      }
      .logic-v {
        font-size: 12px;
        color: rgba(234, 243, 255, 0.88);
        line-height: 1.5;
        white-space: pre-line;
      }
      .records-toolbar {
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 8px;
        flex-wrap: wrap;
        margin-bottom: 8px;
      }
      .filters {
        display: grid;
        grid-template-columns: repeat(3, minmax(0, 1fr));
        gap: 8px;
        width: 100%;
      }
      .config {
        position: relative;
        overflow: hidden;
        border: 1px solid var(--panel-line);
        border-radius: 16px;
        padding: 12px;
        background: var(--panel-bg);
        margin-bottom: 12px;
        backdrop-filter: blur(7px);
      }
      .config-content {
        position: relative;
        margin-top: 9px;
      }
      .config.is-collapsed .config-content {
        display: none;
      }
      .config-inner {
        transition: filter 0.2s ease;
      }
      .config.is-locked .config-inner {
        filter: blur(5px);
        pointer-events: none;
        user-select: none;
      }
      .config-lock {
        display: none;
      }
      .config.is-locked .config-lock {
        position: absolute;
        inset: 0;
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 14px;
        background: rgba(4, 10, 22, 0.6);
        backdrop-filter: blur(2.2px);
      }
      .config-lock-box {
        width: min(360px, 100%);
        border: 1px solid rgba(180, 206, 255, 0.32);
        border-radius: 12px;
        background: rgba(8, 17, 35, 0.92);
        padding: 12px;
      }
      .config-lock-title {
        font-size: 14px;
        font-weight: 780;
        margin-bottom: 4px;
      }
      .config-lock-desc {
        font-size: 12px;
        color: rgba(234, 243, 255, 0.82);
        margin-bottom: 9px;
      }
      .config-lock-or {
        margin: 8px 0 6px;
        font-size: 11px;
        color: rgba(234, 243, 255, 0.64);
        text-align: center;
      }
      .config-lock-google {
        margin: 0 0 8px;
      }
      .config-lock-google.is-busy {
        opacity: 0.72;
        pointer-events: none;
      }
      .config-lock-google-btn {
        display: flex;
        justify-content: center;
        width: 100%;
      }
      .config-lock-google-btn > div {
        width: min(320px, 100%) !important;
      }
      .config-lock-row {
        display: flex;
        align-items: stretch;
        gap: 8px;
      }
      .config-lock-row input {
        flex: 1 1 auto;
        min-width: 0;
      }
      .config-lock-row button {
        flex: 0 0 124px;
        width: 124px;
        min-width: 124px;
      }
      .config-lock-status {
        margin-top: 8px;
        min-height: 16px;
        font-size: 12px;
        color: rgba(255, 189, 206, 0.95);
      }
      .config-head {
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 10px;
        margin-bottom: 0;
        flex-wrap: wrap;
        position: relative;
        z-index: 3;
      }
      .cfg-run-hint {
        position: relative;
        z-index: 3;
      }
      .config-head-actions {
        display: inline-flex;
        align-items: center;
        justify-content: flex-end;
        gap: 8px;
        margin-left: auto;
        flex-wrap: wrap;
      }
      .config-title-wrap {
        display: inline-flex;
        align-items: center;
        gap: 7px;
        min-width: 0;
      }
      .config-title {
        font-size: 14px;
        font-weight: 780;
      }
      .run-symbol-chip {
        display: inline-flex;
        align-items: center;
        border-radius: 999px;
        border: 1px solid rgba(122, 245, 198, 0.42);
        padding: 3px 8px;
        font-size: 11px;
        font-weight: 760;
        line-height: 1.2;
        color: rgba(218, 255, 241, 0.96);
        background: rgba(122, 245, 198, 0.12);
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
        max-width: 96px;
      }
      .run-symbol-chip[hidden] {
        display: none !important;
      }
      .run-toggle-btn {
        width: auto;
        min-width: 132px;
        height: 34px;
        padding: 0 12px;
        font-size: 12px;
      }
      .run-toggle-btn.running {
        border-color: rgba(122, 245, 198, 0.45);
        background: rgba(122, 245, 198, 0.2);
        color: #d8fff1;
      }
      .run-toggle-btn.blocked {
        border-color: rgba(255, 154, 176, 0.45);
        background: rgba(255, 154, 176, 0.16);
        color: #ffd6e1;
      }
      .config-head .collapse-btn {
        width: auto;
        min-width: 84px;
        height: 34px;
        padding: 0 10px;
        font-size: 12px;
      }
      .config-note {
        font-size: 12px;
        color: var(--muted);
        margin-bottom: 10px;
      }
      .cfg-run-hint {
        margin-top: 6px;
        min-height: 16px;
        font-size: 12px;
        color: rgba(255, 206, 168, 0.95);
      }
      .cfg-field {
        display: flex;
        flex-direction: column;
        gap: 6px;
      }
      .cfg-label {
        font-size: 12px;
        font-weight: 760;
        color: rgba(234, 243, 255, 0.84);
      }
      .cfg-grid {
        display: grid;
        grid-template-columns: 1fr;
        gap: 9px;
      }
      .cfg-grid.dual {
        grid-template-columns: 1fr;
      }
      .symbol-chips {
        display: grid;
        grid-template-columns: repeat(2, minmax(0, 1fr));
        gap: 8px;
      }
      .symbol-chip {
        display: flex;
        flex-direction: column;
        align-items: flex-start;
        justify-content: center;
        gap: 2px;
        min-height: 46px;
        height: auto;
        padding: 7px 10px;
        border-radius: 10px;
        border: 1px solid rgba(173, 213, 255, 0.3);
        background: rgba(14, 27, 48, 0.82);
        text-align: left;
      }
      .symbol-chip span {
        font-size: 12px;
        font-weight: 760;
      }
      .symbol-chip em {
        font-size: 11px;
        font-style: normal;
        color: rgba(234, 243, 255, 0.72);
      }
      .symbol-chip.active {
        border-color: rgba(122, 245, 198, 0.52);
        background: rgba(122, 245, 198, 0.14);
        color: #d8fff1;
      }
      .cfg-readonly {
        width: 100%;
        min-height: 42px;
        display: flex;
        align-items: center;
        border-radius: 11px;
        border: 1px solid rgba(173, 213, 255, 0.32);
        background: rgba(16, 28, 50, 0.5);
        color: rgba(234, 243, 255, 0.9);
        padding: 0 12px;
        font-size: 13px;
      }
      .cfg-subhead {
        margin-top: 12px;
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 8px;
        flex-wrap: wrap;
      }
      .link-badge {
        display: inline-flex;
        align-items: center;
        border-radius: 999px;
        border: 1px solid rgba(255, 255, 255, 0.24);
        padding: 4px 10px;
        font-size: 11px;
        font-weight: 800;
        color: rgba(234, 243, 255, 0.92);
        background: rgba(255, 255, 255, 0.06);
      }
      .link-badge.on {
        color: #7af5c6;
        border-color: rgba(122, 245, 198, 0.45);
        background: rgba(122, 245, 198, 0.12);
      }
      .link-badge.pending {
        color: #ffd68a;
        border-color: rgba(255, 214, 138, 0.45);
        background: rgba(255, 214, 138, 0.1);
      }
      .bn-actions {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 8px;
        width: 100%;
      }
      .bn-actions.single {
        grid-template-columns: 1fr;
      }
      .bn-actions button {
        height: 38px;
        font-size: 12px;
        padding: 0 8px;
      }
      #bnLinkFormActions .bn-actions {
        display: flex;
        justify-content: flex-end;
      }
      #bnLinkFormActions .bn-actions button {
        width: auto;
        min-width: 180px;
        max-width: 220px;
        padding: 0 14px;
      }
      #bnLinkForm[hidden],
      #bnLinkFormActions[hidden],
      #bnLinkedActions[hidden] {
        display: none !important;
      }
      .cfg-mini {
        margin-top: 6px;
        font-size: 12px;
        color: rgba(234, 243, 255, 0.86);
        white-space: pre-line;
        word-break: break-word;
        line-height: 1.45;
      }
      .cfg-mini:empty {
        display: none;
        margin-top: 0;
      }
      .cfg-field.is-disabled .cfg-label {
        color: rgba(234, 243, 255, 0.58);
      }
      .cfg-field.is-disabled .cfg-mini {
        color: rgba(234, 243, 255, 0.62);
      }
      .cfg-actions {
        margin-top: 9px;
        display: grid;
        grid-template-columns: 1fr;
        gap: 8px;
      }
      .cfg-save-hint {
        margin-top: 6px;
        min-height: 16px;
        font-size: 12px;
        color: rgba(255, 206, 168, 0.95);
      }
      .cfg-status {
        margin-top: 8px;
        min-height: 18px;
        font-size: 12px;
        color: rgba(234, 243, 255, 0.92);
        white-space: pre-line;
      }
      .summary {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(125px, 1fr));
        gap: 9px;
        margin-bottom: 12px;
      }
      .summary-head {
        margin: 4px 0 7px;
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 8px;
        flex-wrap: wrap;
      }
      .summary-head-actions {
        display: inline-flex;
        align-items: center;
        justify-content: flex-end;
        gap: 8px;
        margin-left: auto;
        flex-wrap: wrap;
      }
      .summary-head-title {
        font-size: 13px;
        font-weight: 780;
        color: rgba(234, 243, 255, 0.94);
      }
      .summary-signal-status {
        display: inline-flex;
        align-items: center;
        max-width: min(100%, 760px);
        border: 1px solid rgba(122, 245, 198, 0.38);
        border-radius: 999px;
        padding: 5px 10px;
        font-size: 12px;
        line-height: 1.35;
        color: rgba(218, 255, 241, 0.96);
        background: rgba(122, 245, 198, 0.12);
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
      }
      .summary-signal-status:empty {
        display: none;
      }
      .summary-refresh-btn {
        width: auto;
        min-width: 80px;
        height: 30px;
        padding: 0 10px;
        font-size: 12px;
        border-radius: 9px;
      }
      .summary-sub {
        border: 1px solid rgba(255, 255, 255, 0.18);
        border-radius: 12px;
        padding: 10px;
        background: linear-gradient(180deg, rgba(13, 24, 46, 0.9), rgba(8, 15, 31, 0.88));
        margin: 0 0 12px;
      }
      .summary-sub-title {
        font-size: 12px;
        font-weight: 760;
        color: rgba(234, 243, 255, 0.78);
      }
      .collateral-cards {
        margin-top: 8px;
        display: grid;
        grid-template-columns: repeat(3, minmax(0, 1fr));
        gap: 8px;
      }
      .collateral-card {
        border: 1px solid rgba(180, 206, 255, 0.2);
        border-radius: 10px;
        padding: 8px 10px;
        background: rgba(9, 18, 36, 0.78);
      }
      .collateral-card-k {
        font-size: 11px;
        color: rgba(234, 243, 255, 0.72);
      }
      .collateral-card-v {
        margin-top: 4px;
        font-size: 14px;
        font-weight: 800;
        color: rgba(234, 243, 255, 0.96);
        font-variant-numeric: tabular-nums;
      }
      .stat {
        border: 1px solid rgba(255, 255, 255, 0.2);
        border-radius: 12px;
        padding: 10px 10px;
        background: linear-gradient(180deg, rgba(15, 29, 55, 0.9), rgba(8, 16, 34, 0.88));
      }
      .stat-k {
        font-size: 12px;
        color: rgba(234, 243, 255, 0.75);
      }
      .stat-v {
        margin-top: 5px;
        font-size: 18px;
        font-weight: 800;
        font-variant-numeric: tabular-nums;
      }
      .board {
        border: 1px solid var(--panel-line);
        border-radius: 16px;
        padding: 12px;
        background: var(--panel-bg);
        backdrop-filter: blur(7px);
      }
      .records-wrap {
        overflow-x: auto;
        -webkit-overflow-scrolling: touch;
        border: 1px solid rgba(180, 206, 255, 0.16);
        border-radius: 12px;
        background: rgba(5, 12, 26, 0.35);
      }
      .records-table {
        --records-col-status: 84px;
        --records-col-symbol: 92px;
        width: 100%;
        border-collapse: collapse;
        min-width: 1060px;
      }
      .records-table thead th {
        text-align: left;
        font-size: 12px;
        font-weight: 780;
        color: rgba(234, 243, 255, 0.8);
        padding: 8px 10px;
        border-bottom: 1px solid rgba(255, 255, 255, 0.14);
        white-space: nowrap;
        background: rgba(14, 28, 53, 0.96);
        position: sticky;
        top: 0;
        z-index: 1;
      }
      .records-table thead th:nth-child(1),
      .records-table tbody td:nth-child(1) {
        position: sticky;
        left: 0;
        min-width: var(--records-col-status);
        width: var(--records-col-status);
      }
      .records-table thead th:nth-child(2),
      .records-table tbody td:nth-child(2) {
        position: sticky;
        left: var(--records-col-status);
        min-width: var(--records-col-symbol);
        width: var(--records-col-symbol);
      }
      .records-table thead th:nth-child(1),
      .records-table thead th:nth-child(2) {
        z-index: 4;
        background: rgba(14, 28, 53, 0.98);
      }
      .records-table tbody td:nth-child(1),
      .records-table tbody td:nth-child(2) {
        z-index: 2;
        background: rgba(8, 18, 36, 0.98);
      }
      .records-table thead th:nth-child(2),
      .records-table tbody td:nth-child(2) {
        box-shadow: 1px 0 0 rgba(180, 206, 255, 0.2);
      }
      .records-table tbody td {
        font-size: 12px;
        color: rgba(234, 243, 255, 0.94);
        padding: 9px 10px;
        border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        vertical-align: middle;
        white-space: nowrap;
        word-break: break-word;
      }
      .records-table tbody tr:hover {
        background: rgba(255, 255, 255, 0.03);
      }
      .records-table tbody tr:hover td:nth-child(1),
      .records-table tbody tr:hover td:nth-child(2) {
        background: rgba(23, 35, 60, 0.98);
      }
      .records-num {
        font-variant-numeric: tabular-nums;
      }
      .records-profit {
        font-weight: 760;
      }
      .records-profit.pos {
        color: #7af5c6;
      }
      .records-profit.neg {
        color: #ff9ab0;
      }
      .records-empty {
        padding: 14px 10px;
        font-size: 13px;
        color: rgba(234, 243, 255, 0.8);
      }
      .records-empty-row td {
        text-align: center;
        color: rgba(234, 243, 255, 0.78);
        padding: 14px 10px;
      }
      .badge {
        border: 1px solid rgba(255, 255, 255, 0.25);
        border-radius: 999px;
        padding: 4px 10px;
        font-size: 12px;
        font-weight: 800;
      }
      .b-open { color: #ffd68a; border-color: rgba(255, 214, 138, 0.5); }
      .b-tp { color: #7af5c6; border-color: rgba(122, 245, 198, 0.5); }
      .b-sl { color: #ff9ab0; border-color: rgba(255, 154, 176, 0.5); }
      .b-fail { color: #ffb6d1; border-color: rgba(255, 182, 209, 0.5); }
      .pager {
        margin-top: 10px;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 8px;
      }
      .filters select {
        width: 100%;
        height: 36px;
        padding: 0 10px;
        border-radius: 9px;
        font-size: 12px;
      }
      #pageLabel {
        min-width: 74px;
        text-align: center;
        font-size: 12px;
        color: rgba(234, 243, 255, 0.92);
      }
      input,
      select,
      button {
        width: 100%;
        min-width: 0;
        height: 42px;
        border-radius: 11px;
        border: 1px solid rgba(173, 213, 255, 0.32);
        background: rgba(16, 28, 50, 0.88);
        color: var(--text);
        padding: 0 12px;
        font-size: 13px;
      }
      input:disabled,
      select:disabled {
        opacity: 0.58;
        filter: saturate(0.55);
        cursor: not-allowed;
        background: rgba(16, 28, 50, 0.54);
      }
      button {
        font-weight: 760;
        cursor: pointer;
        appearance: none;
        -webkit-appearance: none;
      }
      button:disabled,
      button.is-disabled {
        opacity: 0.52;
        filter: saturate(0.6);
        cursor: not-allowed;
      }
      .ghost {
        background: rgba(78, 230, 255, 0.12);
        border-color: rgba(78, 230, 255, 0.35);
        color: rgba(214, 248, 255, 0.95);
      }
      .primary {
        background: rgba(87, 244, 183, 0.2);
        border-color: rgba(87, 244, 183, 0.45);
      }
      .inline-check {
        display: inline-flex;
        align-items: center;
        gap: 6px;
        font-size: 12px;
        color: rgba(234, 243, 255, 0.9);
        white-space: nowrap;
      }
      .inline-check input {
        width: 14px;
        height: 14px;
      }
      @media (min-width: 680px) {
        .mobile-shell {
          padding: 14px 16px 22px;
        }
        .cfg-grid.dual {
          grid-template-columns: repeat(2, minmax(0, 1fr));
        }
        .symbol-chips {
          grid-template-columns: repeat(3, minmax(0, 1fr));
        }
        .records-table tbody td {
          font-size: 13px;
        }
      }
      @media (min-width: 980px) {
        .mobile-shell {
          padding: 18px 20px 26px;
        }
        .head {
          margin-bottom: 12px;
        }
        .title {
          font-size: 22px;
        }
        .cfg-grid {
          grid-template-columns: repeat(3, minmax(0, 1fr));
        }
        .symbol-chips {
          grid-template-columns: repeat(4, minmax(0, 1fr));
        }
        .records-toolbar {
          justify-content: flex-end;
        }
        .filters {
          display: flex;
          width: auto;
        }
        .filters select {
          width: 116px;
        }
      }
      @media (max-width: 760px) {
        .records-wrap {
          overflow-x: auto;
          -webkit-overflow-scrolling: touch;
          border: 1px solid rgba(180, 206, 255, 0.16);
          background: rgba(5, 12, 26, 0.35);
        }
        .records-table {
          --records-col-status: 76px;
          --records-col-symbol: 84px;
          min-width: 1020px;
        }
        .records-table thead {
          display: table-header-group;
        }
      }
      @media (max-width: 640px) {
        .head-main {
          gap: 6px;
          min-width: 0;
        }
        .center-google-auth-btn {
          min-width: 92px;
          padding: 0 10px;
          font-size: 11px;
        }
        .cfg-actions {
          grid-template-columns: 1fr;
        }
        .filters {
          grid-template-columns: 1fr;
        }
        .summary-head {
          flex-wrap: nowrap;
        }
        .summary-signal-status {
          width: auto;
          max-width: 136px;
        }
        .summary-head-actions {
          width: auto;
          margin-left: auto;
          justify-content: flex-end;
          flex-wrap: nowrap;
        }
        .summary-refresh-btn {
          min-width: 74px;
        }
        .config-head {
          flex-wrap: nowrap;
        }
        .config-title-wrap {
          min-width: 0;
          flex: 1 1 auto;
        }
        .run-symbol-chip {
          max-width: 82px;
        }
        .config-head-actions {
          width: auto;
          margin-left: auto;
          justify-content: flex-end;
          flex-wrap: nowrap;
        }
        .run-toggle-btn {
          min-width: 108px;
        }
        .config-head .collapse-btn {
          min-width: 64px;
        }
        .config-lock-row {
          display: grid;
          grid-template-columns: 1fr;
        }
        .config-lock-row button {
          width: 100%;
          min-width: 0;
          flex: 1 1 auto;
        }
        .collateral-cards {
          grid-template-columns: 1fr;
        }
        .logic-modal {
          padding: 10px;
        }
        .logic-modal-body {
          max-height: calc(100vh - 104px);
          padding: 10px;
        }
        .logic-open-btn {
          min-width: 76px;
          padding: 0 10px;
        }
        .center-close-btn {
          min-width: 66px;
          padding: 0 10px;
        }
        .center-google-modal-dialog {
          padding: 12px;
        }
        .center-google-modal-title {
          font-size: 21px;
        }
        .center-google-modal-desc {
          font-size: 13px;
        }
      }
      @media (max-width: 420px) {
        .mobile-shell {
          padding: 10px 10px 16px;
        }
        .summary-signal-status {
          max-width: 116px;
        }
        .run-symbol-chip {
          max-width: 74px;
        }
        .run-toggle-btn {
          min-width: 98px;
          padding: 0 10px;
        }
        .center-google-auth-btn {
          min-width: 84px;
          padding: 0 8px;
        }
        .config-head .collapse-btn {
          min-width: 60px;
          padding: 0 8px;
        }
        .symbol-chips {
          grid-template-columns: repeat(2, minmax(0, 1fr));
        }
        .bn-actions {
          grid-template-columns: 1fr;
        }
        #bnLinkFormActions .bn-actions {
          display: flex;
          justify-content: flex-end;
        }
        #bnLinkFormActions .bn-actions button {
          min-width: 156px;
          max-width: 186px;
        }
        .center-google-modal-title {
          font-size: 19px;
        }
        .center-google-modal-desc {
          font-size: 12px;
        }
        .center-google-modal-actions {
          grid-template-columns: 1fr;
        }
      }
    </style>
  </head>
  <body>
    <div class="mobile-shell">
    <div class="head">
      <div class="head-main">
        <div class="title">자동매매 센터</div>
        <button id="centerGoogleAuthBtn" class="center-google-auth-btn" type="button">
          <span class="google-mark" aria-hidden="true"></span>
          <span id="centerGoogleAuthBtnText">구글 연동</span>
        </button>
      </div>
      <div class="head-tools">
        <button id="logicOpenBtn" class="ghost logic-open-btn" type="button">로직 보기</button>
        <button id="centerCloseBtn" class="ghost center-close-btn" type="button">닫기</button>
      </div>
    </div>
    <section class="config is-locked is-collapsed" id="configSection">
      <div class="config-head">
        <div class="config-title-wrap">
          <div class="config-title">자동매매 설정</div>
          <span id="cfgRunningSymbolChip" class="run-symbol-chip" hidden></span>
        </div>
        <div class="config-head-actions">
          <button id="cfgTopRunBtn" class="primary run-toggle-btn" type="button" disabled>지금 실행</button>
          <button id="cfgCollapseBtn" class="ghost collapse-btn" type="button" aria-expanded="false" aria-controls="configContent">펼치기</button>
        </div>
      </div>
      <div id="cfgTopRunHint" class="cfg-run-hint"></div>
      <div class="config-content" id="configContent">
      <div class="config-inner">
      <div class="cfg-field">
        <div class="cfg-label">스캔 대상</div>
        <div class="cfg-mini">분석 대상 코인을 라운드로빈으로 분할 스캔(틱당 2~3개)하고, 진입 가능한 심볼에 자동 진입 합니다.</div>
      </div>
      <div class="cfg-grid dual" style="margin-top:9px;">
        <div class="cfg-field">
          <div class="cfg-label">거래 마켓</div>
          <select id="cfgMarketSelect">
            <option value="spot">spot</option>
            <option value="futures">futures (롱/숏)</option>
          </select>
        </div>
        <div class="cfg-field" id="cfgLeverageWrap">
          <div class="cfg-label">선물 배수</div>
          <input id="cfgFuturesLeverage" type="number" min="1" max="50" step="1" placeholder="예: 5" />
          <div id="cfgLeverageHint" class="cfg-mini">spot 마켓에서는 선물 배수가 적용되지 않습니다.</div>
        </div>
      </div>
      <div class="cfg-grid dual" style="margin-top:9px;">
        <div class="cfg-field">
          <div class="cfg-label">분석 타임</div>
          <select id="cfgInterval">
            <option value="5m">5m</option>
            <option value="1h">1h</option>
            <option value="4h">4h</option>
          </select>
        </div>
        <div class="cfg-field">
          <div class="cfg-label">투자모드</div>
          <select id="cfgMode">
            <option value="balanced">기본모드</option>
            <option value="aggressive">공격모드</option>
          </select>
        </div>
      </div>
      <div class="cfg-grid dual" style="margin-top:9px;">
        <div class="cfg-field">
          <div class="cfg-label">1회 거래금액 (USDT)</div>
          <input id="cfgOrderSize" type="number" min="10" step="1" placeholder="예: 30" />
        </div>
        <div class="cfg-field">
          <div class="cfg-label">일 최대 손실 (USDT)</div>
          <input id="cfgDailyLoss" type="number" min="1" step="1" placeholder="예: 50" />
        </div>
      </div>
      <div class="cfg-field" style="margin-top:9px;">
        <div class="cfg-label">동시 최대 포지션</div>
        <input id="cfgMaxOpen" type="number" min="1" max="5" step="1" placeholder="1~5" />
      </div>
      <div class="cfg-grid dual" style="margin-top:9px;">
        <div class="cfg-field">
          <div class="cfg-label">익절 TP 처리</div>
          <select id="cfgTpMode">
            <option value="auto">자동 (피보나치)</option>
            <option value="manual">직접입력 (%)</option>
          </select>
        </div>
        <div class="cfg-field">
          <div class="cfg-label">익절 TP (%)</div>
          <input id="cfgTpPct" type="number" min="0.1" step="0.1" placeholder="예: 1.8" />
        </div>
      </div>
      <div class="cfg-grid dual" style="margin-top:9px;">
        <div class="cfg-field">
          <div class="cfg-label">손절 SL 처리</div>
          <select id="cfgSlMode">
            <option value="auto">자동 (피보나치)</option>
            <option value="manual">직접입력 (%)</option>
          </select>
        </div>
        <div class="cfg-field">
          <div class="cfg-label">손절 SL (%)</div>
          <input id="cfgSlPct" type="number" min="0.1" step="0.1" placeholder="예: 0.7" />
        </div>
      </div>
      <div class="cfg-subhead">
        <div class="config-title">바이낸스 API 연동</div>
        <span id="bnLinkBadge" class="link-badge">미연동</span>
      </div>
      <div id="bnLinkForm" class="cfg-grid dual" style="margin-top:8px;">
        <div class="cfg-field">
          <div class="cfg-label">Binance API Key</div>
          <input id="bnApiKey" type="text" autocomplete="off" placeholder="API Key 입력" />
        </div>
        <div class="cfg-field">
          <div class="cfg-label">Binance API Secret</div>
          <input id="bnApiSecret" type="password" autocomplete="off" placeholder="API Secret 입력" />
        </div>
      </div>
      <div id="bnLinkFormActions" style="margin-top:8px;">
        <div class="bn-actions">
          <button id="bnLinkBtn" class="primary" type="button">스팟+선물 동시 연동</button>
        </div>
      </div>
      <div id="bnLinkedActions" style="margin-top:8px;" hidden>
        <div class="bn-actions single">
          <button id="bnUnlinkBtn" class="ghost" type="button">연동 해제</button>
        </div>
      </div>
      <div id="bnLinkedInfo" class="cfg-mini"></div>
      <div id="bnLinkStatus" class="cfg-mini"></div>
      <input id="cfgSymbol" type="hidden" value="ALL" />
      <input id="cfgMarket" type="hidden" value="spot" />
      <input id="cfgEnabled" type="checkbox" hidden />
      <input id="cfgCooldownMin" type="hidden" value="0" />
      <div class="cfg-actions">
        <button id="cfgSaveBtn">설정 저장</button>
      </div>
      <div id="cfgSaveHint" class="cfg-save-hint"></div>
      <div id="cfgStatus" class="cfg-status"></div>
      </div>
      <div class="config-lock" id="configLock">
        <div class="config-lock-box">
          <div class="config-lock-title">설정 잠금</div>
          <div id="cfgLockDesc" class="config-lock-desc">비밀번호 입력 후 자동매매 설정을 변경할 수 있습니다.</div>
          <div id="cfgGoogleWrap" class="config-lock-google" hidden>
            <div id="cfgGoogleBtn" class="config-lock-google-btn"></div>
            <div id="cfgGoogleHint" class="cfg-mini"></div>
          </div>
          <div id="cfgLockOr" class="config-lock-or" hidden>또는 비밀번호 입력</div>
          <div id="cfgPasswordRow" class="config-lock-row">
            <input id="cfgUnlockInput" type="password" autocomplete="off" placeholder="비밀번호 입력" />
            <button id="cfgUnlockBtn" class="primary" type="button">해제</button>
          </div>
          <div id="cfgLockStatus" class="config-lock-status"></div>
        </div>
      </div>
      </div>
    </section>
    <div class="summary-head">
      <span class="summary-head-title">거래 통계</span>
      <div class="summary-head-actions">
        <span id="summarySignalStatus" class="summary-signal-status"></span>
        <button id="summaryRefreshBtn" class="ghost summary-refresh-btn" type="button">새로고침</button>
      </div>
    </div>
    <div id="summary" class="summary">
      <div class="stat"><div class="stat-k">총 거래</div><div class="stat-v">- (-%)</div></div>
      <div class="stat"><div class="stat-k">손익금액</div><div class="stat-v">-</div></div>
      <div class="stat"><div class="stat-k">손익%</div><div class="stat-v">-</div></div>
    </div>
    <div class="summary-sub">
      <div class="summary-sub-title">거래통계 담보금 (USDT)</div>
      <div class="collateral-cards">
        <div class="collateral-card">
          <div class="collateral-card-k">담보금 합계</div>
          <div id="bnCollateralTotal" class="collateral-card-v">-</div>
        </div>
        <div class="collateral-card">
          <div class="collateral-card-k">Spot 합계 (코인)</div>
          <div id="bnCollateralSpot" class="collateral-card-v">-</div>
        </div>
        <div class="collateral-card">
          <div class="collateral-card-k">Futures 합계</div>
          <div id="bnCollateralFutures" class="collateral-card-v">-</div>
        </div>
      </div>
    </div>
    <div class="board">
      <div class="records-toolbar">
        <div class="filters">
          <select id="filterSymbol"></select>
          <select id="filterMode"></select>
          <select id="filterStatus"></select>
        </div>
      </div>
      <div class="records-wrap">
        <table class="records-table">
          <thead>
            <tr>
              <th>상태</th>
              <th>코인</th>
              <th>배수</th>
              <th>롱/숏 여부</th>
              <th>거래시드</th>
              <th>수익</th>
              <th>수익률</th>
              <th>진입가</th>
              <th>익절/손절가</th>
              <th>구매일시</th>
              <th>판매일시</th>
            </tr>
          </thead>
          <tbody id="recordsBody"></tbody>
        </table>
      </div>
      <div class="records-empty" id="emptyState" hidden>표시할 기록이 없습니다.</div>
      <div class="pager">
        <button id="prevBtn">이전</button>
        <div id="pageLabel">1 페이지</div>
        <button id="nextBtn">다음</button>
      </div>
    </div>
    </div>
    <div class="logic-modal" id="logicModal" hidden>
      <div class="logic-modal-dialog" role="dialog" aria-modal="true" aria-labelledby="logicModalTitle">
        <div class="logic-modal-head">
          <div class="logic-modal-title" id="logicModalTitle">현재 자동매매 로직 요약</div>
          <button id="logicModalCloseBtn" class="ghost logic-modal-close" type="button">닫기</button>
        </div>
        <div class="logic-modal-body">
          <div class="logic-block">
            <div class="logic-k">공통 진입 전 체크</div>
            <div class="logic-v">1) 리스트업된 코인을 라운드로빈 분할 스캔(틱당 2~3개)하고, 진입 가능 후보 중 점수가 가장 높은 코인을 선택합니다.
2) 바이낸스 연동 + 설정 저장 + 실행 상태여야 합니다.
3) 동시 최대 포지션 수 도달 시 신규 진입을 건너뜁니다.
4) 당일 실현손익이 일 최대 손실 한도 이하이면 신규 진입을 중단합니다.
5) 선택 마켓 가용 담보가 1회 거래금액보다 부족하면 신규 진입을 중단합니다.</div>
          </div>
          <div class="logic-block">
            <div class="logic-k">매수/매도 진입 조건</div>
            <div class="logic-v">기본모드/공격모드 공통: 확률·신뢰도·레짐·스윙·거래량 + 플로우 점수(taker ratio/OI 변화/top-trader ratio/funding)를 합산한 신호점수를 계산합니다.
기본모드 기준점수: 52점, 공격모드 기준점수: 45점.
추세게이트: diff 7 이상 + confidence 0.28 이상(또는 diff 12 이상 bypass).
공격모드는 기준점수만 완화하며, 안전필터(담보/일손실/손절무효)는 동일하게 유지합니다.
스윙 역방향 신호는 차단하지 않고 점수 페널티로만 반영합니다.
하락 스윙 예외: 바닥(0.0~0.236) 터치 후 반전 확인(종가 회복 + 매수우위 + 신뢰도) 시 반전 롱을 허용합니다.</div>
          </div>
          <div class="logic-block">
            <div class="logic-k">피보나치 기반 체결</div>
            <div class="logic-v">1) 진입: 단일 진입가가 아닌 피보 진입구간(하단~상단) 터치 시 체결 처리합니다.
2) 손절: 자동 모드면 피보 손절가, 수동 모드면 입력 % 기준 손절가를 사용합니다.
3) 익절: 자동 모드면 피보 TP1/TP2, 수동 모드면 입력 %를 TP1=TP2로 사용합니다.
4) 보호조건: 손절 무효구간 진입, 구간 과이탈, 과도한 추격, 최소 RR(0.7) 미달 시 신규 진입을 건너뜁니다.
5) 반전 롱은 하락 스윙에서 확인봉 조건을 만족할 때만 실행합니다.</div>
          </div>
          <div class="logic-block">
            <div class="logic-k">청산 규칙</div>
            <div class="logic-v">1) TP1 도달 시 50% 부분익절, TP2 도달 시 잔량 청산.
2) 동일 봉에서 손절/익절이 함께 터치되면 보수적으로 손절 우선 처리.
3) 진입 후 2일(48시간) 내 TP/SL 미도달이면 시간종료(CLOSED_FAIL)로 정리합니다.</div>
          </div>
          <div class="logic-block">
            <div class="logic-k">실거래 보호 처리</div>
            <div class="logic-v">1) 진입 체결 후 거래소 보호손절 주문을 생성합니다.
2) 보호주문 실패 시 즉시 반대 시장가 청산을 시도하고 자동매매를 비활성화합니다.
3) 스팟은 STOP_LOSS(시장가 트리거), 선물은 STOP_MARKET(reduceOnly)로 보호주문을 운영합니다.
4) 부분청산 후 남은 수량 기준으로 보호손절 주문을 재생성합니다.</div>
          </div>
          <div class="logic-block">
            <div class="logic-k">운영 참고</div>
            <div class="logic-v">백그라운드 tick 주기 기본값은 15초이며, 일손실 기준은 KST 일자 기준(실현손익만)으로 집계됩니다.
자동매매 진입 판단 가격은 WebSocket 수신값을 우선 사용하고, 없으면 최신 캔들 종가를 사용합니다.</div>
          </div>
        </div>
      </div>
    </div>
    <div id="centerGoogleModal" class="center-google-modal" hidden>
      <div class="center-google-modal-dialog" role="dialog" aria-modal="true" aria-labelledby="centerGoogleModalTitle">
        <div class="center-google-modal-head">
          <div id="centerGoogleModalTitle" class="center-google-modal-title">구글 연동</div>
          <button id="centerGoogleModalCloseBtn" class="ghost center-google-modal-close" type="button">닫기</button>
        </div>
        <div id="centerGoogleModalDesc" class="center-google-modal-desc">구글 계정으로 로그인하면 자동매매 설정 잠금이 해제됩니다.</div>
        <div class="center-google-modal-body">
          <div id="centerGoogleModalState" class="center-google-modal-state" hidden>
            <div class="center-google-modal-state-label">현재 연동 계정</div>
            <div id="centerGoogleModalStateEmail" class="center-google-modal-state-email">-</div>
          </div>
          <div id="centerGoogleModalBtnWrap" class="center-google-modal-btn-wrap">
            <div id="centerGoogleModalBtn" class="center-google-modal-btn"></div>
          </div>
          <div id="centerGoogleModalActions" class="center-google-modal-actions" hidden>
            <button id="centerGoogleSwitchBtn" class="center-google-modal-switch" type="button">계정 변경</button>
            <button id="centerGoogleDisconnectBtn" class="center-google-modal-disconnect" type="button">연동 해제</button>
          </div>
          <div id="centerGoogleModalNote" class="center-google-modal-note"></div>
        </div>
      </div>
    </div>
    <script src="https://accounts.google.com/gsi/client" async defer></script>
    <script src="/static/auto_trades_popup.js?v=20260222zc"></script>
  </body>
</html>
